
{% extends 'base.html' %}
{% block content %}
{% load static %}
{% get_static_prefix as STATIC_URL %}

<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<script src="{{STATIC_URL}}js/jquery.dataTables.min.js"></script>
<script>
$(document).ready(function() {
	/*$('#rapport').dataTable({
		"bPaginate": false,
		"bLengthChange": false,
		"bFilter": true,
		"bSort": false,
		"bInfo": false,
		"bAutoWidth": false
	});

*/

calculer_prix_vendu = function(){
	var total =0;
	cells = $("#rapport-vendu .prix");
	$.each(cells,function(){
		total = parseFloat(total) + parseFloat($(this).html().replace(',','.'));
	});
	$('#total-vendu').html(total.toFixed(2));
}
calculer_prix_ajoute = function(){
	var total =0;
	cells = $("#rapport-ajoute .prix");
	$.each(cells,function(){
		total = parseFloat(total) + parseFloat($(this).html().replace(',','.'));
	});
	$('#total-ajoute').html(total.toFixed(2));
}
calculer_prix_vendu();
calculer_prix_ajoute();

});
</script>
<script type="text/javascript">
function go_rapport(){
	ladate= $("#date").val();
	window.open('/rapport_date/'+'?date='+ladate);
}
$(function() {
	$( "#date" ).datepicker({
		dateFormat:"yy-mm-dd"
	});
});
</script>

<style type="text/css">
body{
	top: 50px;
}
table td{ 
	padding: 5px;
}

.ui-datepicker{
	margin-top: -50px;
}

#rapport-wrap{
	margin-top: 200px;
}


#rapport_filter{
	float:right;
}
#rapport-wrap h1{
	position: relative;
	margin-right: auto;
	margin-left: auto;
	text-align: center;
	padding-bottom: 100px;
}
#rapport-wrap h3{
	color: #0044cc;
}
</style>



<h3>Choisir une date  :</h3><input id="date" type="text">
<a class="btn btn-primary btn-large" onclick="go_rapport();">Voir rapport</a>	


<div id="rapport-wrap">
	<h1>Rapport d'aujourd'hui : {{ladate}}</h1>

	<div class="rapport-vendu-wrap">
		<h3>Rapport des livres vendus</h3>
		<table id="rapport-vendu" class="table table-hover rapport">

			<thead>
				<th>Titre</th>
				<th>Auteur</th>
				<th>isbn</th>
				<th>Prix</th>
			</thead>
			<tbody>
				{% for livre in vendu %}
				<tr>
					<td>{{livre.titre}}</td>
					<td>{{livre.livre.auteur}}</td>			
					<td>{{livre.livre.isbn}}</td>
					<td class="prix">{{livre.prix}}</td>			
				</tr>

				{% endfor %}
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td id="total-vendu"><td><b>TOTAL</b></td></td>
				</tr>

			</tbody>

		</table>

	</div>

	<div class="rapport-ajoute-wrap">

	</div>
	<h3>Rapport des livres ajout√©s</h3>
	<table id="rapport-ajoute" class="table table-hover rapport">

		<thead>
			<th>Titre</th>
			<th>Auteur</th>
			<th>isbn</th>
			<th>Prix</th>
		</thead>
		<tbody>
			{% for livre in ajoute %}
			<tr>
				<td>{{livre.titre}}</td>
				<td>{{livre.livre.auteur}}</td>			
				<td>{{livre.livre.isbn}}</td>
				<td class="prix">{{livre.prix}}</td>
			</tr>

			{% endfor %}
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td id="total-ajoute"><td><b>TOTAL</b></td></td>
			</tr>

		</tbody>

	</table>
</div>


{% endblock %}

